let timesheetStr = '{"富锦路":[{"1号线":[{"name":"莘庄","st":"05:30","et":"22:30"},{"name":"富锦路","st":"06:12","et":"23:37"}]}],"友谊西路":[{"1号线":[{"name":"莘庄","st":"05:32","et":"22:32"},{"name":"富锦路","st":"06:10","et":"23:35"}]}],"宝安公路":[{"1号线":[{"name":"莘庄","st":"05:34","et":"22:34"},{"name":"富锦路","st":"06:08","et":"23:33"}]}],"共富新村":[{"1号线":[{"name":"莘庄","st":"05:37","et":"22:37"},{"name":"富锦路","st":"06:05","et":"23:30"}]}],"呼兰路":[{"1号线":[{"name":"莘庄","st":"05:40","et":"22:40"},{"name":"富锦路","st":"06:03","et":"23:27"}]}],"通河新村":[{"1号线":[{"name":"莘庄","st":"05:42","et":"22:42"},{"name":"富锦路","st":"06:00","et":"23:25"}]}],"共康路":[{"1号线":[{"name":"莘庄","st":"05:45","et":"22:45"},{"name":"富锦路","st":"05:58","et":"23:23"}]}],"彭浦新村":[{"1号线":[{"name":"莘庄","st":"05:47","et":"22:47"},{"name":"富锦路","st":"05:55","et":"23:20"}]}],"汶水路":[{"1号线":[{"name":"莘庄","st":"05:50","et":"22:50"},{"name":"富锦路","st":"05:52","et":"23:17"}]}],"上海马戏城":[{"1号线":[{"name":"莘庄","st":"05:53","et":"22:53"},{"name":"富锦路","st":"05:50","et":"23:15"}]}],"延长路":[{"1号线":[{"name":"莘庄","st":"05:55","et":"22:55"},{"name":"富锦路","st":"05:48","et":"23:13"}]}],"中山北路":[{"1号线":[{"name":"莘庄","st":"05:57","et":"22:57"},{"name":"富锦路","st":"05:45","et":"23:10"}]}],"上海火车站":[{"1号线":[{"name":"莘庄","st":"05:30","et":"23:00"},{"name":"富锦路","st":"05:43,05:19","et":"23:08"}]},{"3号线":[{"name":"上海南站","st":"06:05","et":"23:15"},{"name":"江杨北路","st":"05:53","et":"22:58"}]},{"4号线":[{"name":"宜山路","st":"05:49","et":"22:49"},{"name":"宜山路","st":"06:10","et":"23:10"}]}],"汉中路":[{"1号线":[{"name":"莘庄","st":"05:31","et":"23:01"},{"name":"富锦路","st":"05:40,05:17","et":"23:05"}]},{"12号线":[{"name":"七莘路","st":"06:10","et":"23:10"},{"name":"金海路","st":"06:07","et":"23:07"}]},{"13号线":[{"name":"世博大道","st":"06:20","et":"22:41"},{"name":"金运路","st":"06:16","et":"22:25"}]}],"新闸路":[{"1号线":[{"name":"莘庄","st":"05:33","et":"23:03"},{"name":"富锦路","st":"05:38,05:15","et":"23:03"}]}],"人民广场":[{"1号线":[{"name":"莘庄","st":"05:35","et":"23:05"},{"name":"富锦路","st":"05:37,05:14","et":"23:01"}]},{"2号线":[{"name":"徐泾东站","st":"05:38","et":"23:18"},{"name":"广兰路","st":"06:02","et":"23:17"}]},{"8号线":[{"name":"市光路","st":"06:06","et":"23:06"},{"name":"沈杜公路","st":"06:00","et":"23:00"}]}],"黄陂南路":[{"1号线":[{"name":"莘庄","st":"05:38","et":"23:08"},{"name":"富锦路","st":"05:34,05:11","et":"22:58"}]}],"陕西南路":[{"10号线":[{"name":"新江湾城","st":"05:53","et":"22:24"},{"name":"航中路","st":"06:03","et":"22:33"}]},{"10号线主线":[{"name":"新江湾城","st":"06:19","et":"22:30"},{"name":"虹桥火车站","st":"05:58","et":"22:38"}]},{"1号线":[{"name":"莘庄","st":"05:40","et":"23:10"},{"name":"富锦路","st":"05:31,05:08","et":"22:56"}]},{"12号线":[{"name":"七莘路","st":"06:16","et":"23:16"},{"name":"金海路","st":"06:02","et":"23:02"}]}],"常熟路":[{"1号线":[{"name":"莘庄","st":"05:42","et":"23:12"},{"name":"富锦路","st":"05:29,05:06","et":"22:54"}]},{"7号线":[{"name":"美兰湖","st":"06:01","et":"23:01"},{"name":"花木路","st":"06:01","et":"23:01"}]}],"衡山路":[{"1号线":[{"name":"莘庄","st":"05:44","et":"23:14"},{"name":"富锦路","st":"05:27,05:04","et":"22:52"}]}],"徐家汇":[{"1号线":[{"name":"莘庄","st":"05:46","et":"23:16"},{"name":"富锦路","st":"05:25,05:02","et":"22:50"}]},{"9号线":[{"name":"杨高中路","st":"06:01","et":"22:47"},{"name":"松江南站","st":"05:54","et":"22:54"}]},{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:27","et":"22:58"},{"name":"迪士尼","st":"06:27","et":"22:58"},{"name":"嘉定北","st":"06:01","et":"23:10"},{"name":"花桥","st":"06:06","et":"22:40"}]}],"上海体育馆":[{"1号线":[{"name":"莘庄","st":"05:49","et":"23:19"},{"name":"富锦路","st":"05:23,05:00","et":"22:48"}]},{"4号线":[{"name":"宜山路","st":"06:27","et":"23:27"},{"name":"宜山路","st":"05:32","et":"22:32"}]}],"漕宝路":[{"1号线":[{"name":"莘庄","st":"05:51","et":"23:21"},{"name":"富锦路","st":"05:20,04:57","et":"22:45"}]},{"12号线":[{"name":"七莘路","st":"06:31","et":"23:31"},{"name":"金海路","st":"05:46","et":"22:46"}]}],"上海南站":[{"1号线":[{"name":"莘庄","st":"05:54","et":"23:24"},{"name":"富锦路","st":"05:18,04:55","et":"22:42"}]},{"3号线":[{"name":"上海南站","st":"06:32","et":"23:42"},{"name":"江杨北路","st":"05:25","et":"22:30"}]}],"锦江乐园":[{"1号线":[{"name":"莘庄","st":"05:57","et":"23:27"},{"name":"富锦路","st":"05:37,05:37","et":"22:39"}]}],"莲花路":[{"1号线":[{"name":"莘庄","st":"06:00","et":"23:30"},{"name":"富锦路","st":"05:34,05:34","et":"22:36"}]}],"外环路":[{"1号线":[{"name":"莘庄","st":"06:02","et":"23:32"},{"name":"富锦路","st":"05:32,05:32","et":"22:34"}]}],"莘庄":[{"1号线":[{"name":"莘庄","st":"06:04","et":"23:34"},{"name":"富锦路","st":"05:30,05:30","et":"22:32"}]},{"5号线":[{"name":"闵行开发区","st":"06:00","et":"22:30"},{"name":"莘庄","st":"06:26","et":"22:26"}]}],"徐泾东":[{"2号线":[{"name":"徐泾东站","st":"06:09","et":"23:51"},{"name":"广兰路","st":"05:30","et":"22:45"}]}],"虹桥火车站":[{"10号线主线":[{"name":"新江湾城","st":"05:55","et":"22:05"},{"name":"虹桥火车站","st":"06:22","et":"23:02"}]},{"2号线":[{"name":"徐泾东站","st":"06:07","et":"23:49"},{"name":"广兰路","st":"05:33","et":"22:48"}]}],"虹桥2号航站楼":[{"10号线主线":[{"name":"新江湾城","st":"05:56","et":"22:06"},{"name":"虹桥火车站","st":"06:21","et":"23:01"}]},{"2号线":[{"name":"徐泾东站","st":"06:05","et":"23:47"},{"name":"广兰路","st":"05:35","et":"22:50"}]}],"淞虹路":[{"2号线":[{"name":"徐泾东站","st":"05:58","et":"23:40"},{"name":"广兰路","st":"05:42","et":"22:57"}]}],"北新泾":[{"2号线":[{"name":"徐泾东站","st":"05:55","et":"23:38"},{"name":"广兰路","st":"05:44","et":"22:59"}]}],"威宁路":[{"2号线":[{"name":"徐泾东站","st":"05:53","et":"23:35"},{"name":"广兰路","st":"05:46","et":"23:01"}]}],"娄山关路":[{"2号线":[{"name":"徐泾东站","st":"05:50","et":"23:32"},{"name":"广兰路","st":"05:49","et":"23:04"}]}],"中山公园":[{"2号线":[{"name":"徐泾东站","st":"05:48","et":"23:29"},{"name":"广兰路","st":"05:52","et":"23:07"}]},{"3号线":[{"name":"上海南站","st":"06:17","et":"23:27"},{"name":"江杨北路","st":"05:41","et":"22:46"}]},{"4号线":[{"name":"宜山路","st":"05:37","et":"22:37"},{"name":"宜山路","st":"06:22","et":"23:22"}]}],"江苏路":[{"2号线":[{"name":"徐泾东站","st":"05:45","et":"23:26"},{"name":"广兰路","st":"05:54","et":"23:09"}]},{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:21","et":"22:53"},{"name":"迪士尼","st":"06:21","et":"22:53"},{"name":"嘉定北","st":"06:00","et":"23:16"},{"name":"花桥","st":"06:05","et":"22:46"}]}],"静安寺":[{"2号线":[{"name":"徐泾东站","st":"05:42","et":"23:24"},{"name":"广兰路","st":"05:57","et":"23:12"}]},{"7号线":[{"name":"美兰湖","st":"06:03","et":"23:03"},{"name":"花木路","st":"05:59","et":"22:59"}]}],"南京西路":[{"2号线":[{"name":"徐泾东站","st":"05:40","et":"23:21"},{"name":"广兰路","st":"05:59","et":"23:14"}]},{"12号线":[{"name":"七莘路","st":"06:13","et":"23:13"},{"name":"金海路","st":"06:04","et":"23:04"}]},{"13号线":[{"name":"世博大道","st":"06:24","et":"22:45"},{"name":"金运路","st":"06:12","et":"22:21"}]}],"南京东路":[{"10号线":[{"name":"新江湾城","st":"06:02","et":"22:34"},{"name":"航中路","st":"05:54","et":"22:23"}]},{"10号线主线":[{"name":"新江湾城","st":"06:29","et":"22:39"},{"name":"虹桥火车站","st":"05:49","et":"22:29"}]},{"2号线":[{"name":"徐泾东站","st":"05:35","et":"23:15"},{"name":"广兰路","st":"06:04","et":"23:19"}]}],"陆家嘴":[{"2号线":[{"name":"徐泾东站","st":"05:32","et":"23:12"},{"name":"广兰路","st":"06:07","et":"23:22"}]}],"东昌路":[{"2号线":[{"name":"徐泾东站","st":"05:30","et":"23:10"},{"name":"广兰路","st":"06:09","et":"23:24"}]}],"世纪大道":[{"2号线":[{"name":"徐泾东站","st":"05:28","et":"23:07"},{"name":"广兰路","st":"06:11","et":"23:26"}]},{"4号线":[{"name":"宜山路","st":"06:05","et":"23:05"},{"name":"宜山路","st":"05:53","et":"22:53"}]},{"6号线":[{"name":"港城路","st":"05:57","et":"22:57"},{"name":"东方体育中心","st":"06:08","et":"23:08"}]},{"9号线":[{"name":"杨高中路","st":"06:21","et":"23:07"},{"name":"松江南站","st":"05:34","et":"22:34"}]}],"上海科技馆":[{"2号线":[{"name":"徐泾东站","st":"05:25","et":"23:04"},{"name":"广兰路","st":"06:14","et":"23:29"}]}],"世纪公园":[{"2号线":[{"name":"徐泾东站","st":"05:22","et":"23:01"},{"name":"广兰路","st":"06:16","et":"23:31"}]}],"龙阳路":[{"2号线":[{"name":"徐泾东站","st":"05:21","et":"22:59"},{"name":"广兰路","st":"06:18","et":"23:33"}]},{"7号线":[{"name":"美兰湖","st":"05:33","et":"22:33"},{"name":"花木路","st":"06:31","et":"23:31"}]},{"16号线":[{"name":"龙阳路","st":"--:--","et":"--:--"},{"name":"滴水湖","st":"05:50","et":"22:00"}]},{"机场磁悬浮":[{"name":"浦东国际机场","st":"06:45","et":"21:40"},{"name":"龙阳路","st":"--:--","et":"--:--"}]}],"张江高科":[{"2号线":[{"name":"徐泾东站","st":"05:35","et":"22:55"},{"name":"广兰路","st":"06:22","et":"23:37"}]}],"金科路":[{"2号线":[{"name":"徐泾东站","st":"05:33","et":"22:53"},{"name":"广兰路","st":"06:25","et":"23:40"}]}],"广兰路":[{"2号线":[{"name":"徐泾东站","st":"05:30","et":"22:50"},{"name":"广兰路","st":"06:27","et":"23:42"}]},{"2号线东延线":[{"name":"浦东国际机场","st":"06:00","et":"22:00"},{"name":"广兰路","st":"06:34","et":"22:34"}]}],"唐镇":[{"2号线东延线":[{"name":"浦东国际机场","st":"06:04","et":"22:04"},{"name":"广兰路","st":"06:29","et":"22:29"}]}],"创新中路":[{"2号线东延线":[{"name":"浦东国际机场","st":"06:08","et":"22:08"},{"name":"广兰路","st":"06:26","et":"22:26"}]}],"华夏东路":[{"2号线东延线":[{"name":"浦东国际机场","st":"06:11","et":"22:11"},{"name":"广兰路","st":"06:23","et":"22:23"}]}],"川沙":[{"2号线东延线":[{"name":"浦东国际机场","st":"06:15","et":"22:15"},{"name":"广兰路","st":"06:18","et":"22:18"}]}],"凌空路":[{"2号线东延线":[{"name":"浦东国际机场","st":"06:19","et":"22:19"},{"name":"广兰路","st":"06:15","et":"22:15"}]}],"远东大道":[{"2号线东延线":[{"name":"浦东国际机场","st":"06:24","et":"22:24"},{"name":"广兰路","st":"06:10","et":"22:10"}]}],"海天三路":[{"2号线东延线":[{"name":"浦东国际机场","st":"06:31","et":"22:31"},{"name":"广兰路","st":"06:03","et":"22:03"}]}],"浦东国际机场":[{"2号线东延线":[{"name":"浦东国际机场","st":"06:34","et":"22:34"},{"name":"广兰路","st":"06:00","et":"22:00"}]},{"机场磁悬浮":[{"name":"浦东国际机场","st":"--:--","et":"--:--"},{"name":"龙阳路","st":"07:02","et":"21:42"}]}],"江杨北路":[{"3号线":[{"name":"上海南站","st":"05:25","et":"22:35"},{"name":"江杨北路","st":"06:32","et":"23:37"}]}],"铁力路":[{"3号线":[{"name":"上海南站","st":"05:27","et":"22:37"},{"name":"江杨北路","st":"06:29","et":"23:34"}]}],"友谊路":[{"3号线":[{"name":"上海南站","st":"05:30","et":"22:40"},{"name":"江杨北路","st":"06:27","et":"23:32"}]}],"宝杨路":[{"3号线":[{"name":"上海南站","st":"05:32","et":"22:42"},{"name":"江杨北路","st":"06:25","et":"23:30"}]}],"水产路":[{"3号线":[{"name":"上海南站","st":"05:35","et":"22:45"},{"name":"江杨北路","st":"06:22","et":"23:27"}]}],"淞滨路":[{"3号线":[{"name":"上海南站","st":"05:37","et":"22:47"},{"name":"江杨北路","st":"06:20","et":"23:25"}]}],"张华浜":[{"3号线":[{"name":"上海南站","st":"05:39","et":"22:49"},{"name":"江杨北路","st":"06:18","et":"23:23"}]}],"淞发路":[{"3号线":[{"name":"上海南站","st":"05:41","et":"22:51"},{"name":"江杨北路","st":"06:15","et":"23:20"}]}],"长江南路":[{"3号线":[{"name":"上海南站","st":"05:44","et":"22:54"},{"name":"江杨北路","st":"06:13","et":"23:18"}]}],"殷高西路":[{"3号线":[{"name":"上海南站","st":"05:47","et":"22:57"},{"name":"江杨北路","st":"06:10","et":"23:15"}]}],"江湾镇":[{"3号线":[{"name":"上海南站","st":"05:50","et":"23:00"},{"name":"江杨北路","st":"06:08","et":"23:13"}]}],"大柏树":[{"3号线":[{"name":"上海南站","st":"05:52","et":"23:02"},{"name":"江杨北路","st":"06:05","et":"23:10"}]}],"赤峰路":[{"3号线":[{"name":"上海南站","st":"05:54","et":"23:04"},{"name":"江杨北路","st":"06:03","et":"23:08"}]}],"虹口足球场":[{"3号线":[{"name":"上海南站","st":"05:57","et":"23:07"},{"name":"江杨北路","st":"06:01","et":"23:06"}]},{"8号线":[{"name":"市光路","st":"06:15","et":"23:15"},{"name":"沈杜公路","st":"05:50","et":"22:50"}]}],"东宝兴路":[{"3号线":[{"name":"上海南站","st":"05:59","et":"23:09"},{"name":"江杨北路","st":"05:58","et":"23:03"}]}],"宝山路":[{"3号线":[{"name":"上海南站","st":"06:01","et":"23:11"},{"name":"江杨北路","st":"05:56","et":"23:01"}]},{"4号线":[{"name":"宜山路","st":"05:52","et":"22:52"},{"name":"宜山路","st":"06:07","et":"23:07"}]}],"中潭路":[{"3号线":[{"name":"上海南站","st":"06:07","et":"23:17"},{"name":"江杨北路","st":"05:50","et":"22:55"}]},{"4号线":[{"name":"宜山路","st":"05:46","et":"22:46"},{"name":"宜山路","st":"06:13","et":"23:13"}]}],"镇坪路":[{"3号线":[{"name":"上海南站","st":"06:10","et":"23:20"},{"name":"江杨北路","st":"05:48","et":"22:53"}]},{"4号线":[{"name":"宜山路","st":"05:44","et":"22:44"},{"name":"宜山路","st":"06:15","et":"23:15"}]},{"7号线":[{"name":"美兰湖","st":"06:10","et":"23:10"},{"name":"花木路","st":"05:52","et":"22:52"}]}],"曹杨路":[{"3号线":[{"name":"上海南站","st":"06:12","et":"23:22"},{"name":"江杨北路","st":"05:45","et":"22:50"}]},{"4号线":[{"name":"宜山路","st":"05:41","et":"22:41"},{"name":"宜山路","st":"06:18","et":"23:18"}]},{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:16","et":"22:48"},{"name":"迪士尼","st":"06:16","et":"22:48"},{"name":"嘉定北","st":"06:04","et":"23:21"},{"name":"花桥","st":"06:09","et":"22:51"}]}],"金沙江路":[{"3号线":[{"name":"上海南站","st":"06:14","et":"23:24"},{"name":"江杨北路","st":"05:43","et":"22:48"}]},{"4号线":[{"name":"宜山路","st":"05:39","et":"22:39"},{"name":"宜山路","st":"06:19","et":"23:19"}]},{"13号线":[{"name":"世博大道","st":"06:08","et":"22:29"},{"name":"金运路","st":"06:20","et":"22:37"}]}],"延安西路":[{"3号线":[{"name":"上海南站","st":"06:19","et":"23:29"},{"name":"江杨北路","st":"05:39","et":"22:44"}]},{"4号线":[{"name":"宜山路","st":"05:35","et":"22:35"},{"name":"宜山路","st":"06:24","et":"23:24"}]}],"虹桥路":[{"10号线":[{"name":"新江湾城","st":"05:46","et":"22:17"},{"name":"航中路","st":"06:10","et":"22:40"}]},{"10号线主线":[{"name":"新江湾城","st":"06:12","et":"22:23"},{"name":"虹桥火车站","st":"06:05","et":"22:45"}]},{"3号线":[{"name":"上海南站","st":"06:21","et":"23:31"},{"name":"江杨北路","st":"05:36","et":"22:41"}]},{"4号线":[{"name":"宜山路","st":"05:32","et":"22:32"},{"name":"宜山路","st":"06:26","et":"23:26"}]}],"宜山路":[{"3号线":[{"name":"上海南站","st":"06:23","et":"23:33"},{"name":"江杨北路","st":"05:34","et":"22:39"}]},{"4号线":[{"name":"宜山路","st":"05:30","et":"22:30"},{"name":"宜山路","st":"--:--","et":"--:--"},{"name":"宜山路","st":"05:30","et":"22:30"},{"name":"宜山路","st":"--:--","et":"--:--"}]},{"9号线":[{"name":"杨高中路","st":"05:57","et":"22:44"},{"name":"松江南站","st":"05:57","et":"22:57"}]}],"漕溪路":[{"3号线":[{"name":"上海南站","st":"06:26","et":"23:36"},{"name":"江杨北路","st":"05:32","et":"22:37"}]}],"龙漕路":[{"3号线":[{"name":"上海南站","st":"06:28","et":"23:38"},{"name":"江杨北路","st":"05:30","et":"22:35"}]},{"12号线":[{"name":"七莘路","st":"06:29","et":"23:29"},{"name":"金海路","st":"05:49","et":"22:49"}]}],"石龙路":[{"3号线":[{"name":"上海南站","st":"06:30","et":"23:40"},{"name":"江杨北路","st":"05:27","et":"22:32"}]}],"上海体育场":[{"4号线":[{"name":"宜山路","st":"06:25","et":"23:25"},{"name":"宜山路","st":"05:34","et":"22:34"}]}],"东安路":[{"4号线":[{"name":"宜山路","st":"06:23","et":"23:23"},{"name":"宜山路","st":"05:36","et":"22:36"}]},{"7号线":[{"name":"美兰湖","st":"05:56","et":"22:56"},{"name":"花木路","st":"06:06","et":"23:06"}]}],"大木桥路":[{"4号线":[{"name":"宜山路","st":"06:21","et":"23:21"},{"name":"宜山路","st":"05:37","et":"22:37"}]},{"12号线":[{"name":"七莘路","st":"06:07","et":"23:21"},{"name":"金海路","st":"05:57","et":"22:57"}]}],"鲁班路":[{"4号线":[{"name":"宜山路","st":"06:19","et":"23:19"},{"name":"宜山路","st":"05:39","et":"22:39"}]}],"西藏南路":[{"4号线":[{"name":"宜山路","st":"06:17","et":"23:17"},{"name":"宜山路","st":"05:42","et":"22:42"}]},{"8号线":[{"name":"市光路","st":"05:58","et":"22:58"},{"name":"沈杜公路","st":"06:08","et":"23:08"}]}],"南浦大桥":[{"4号线":[{"name":"宜山路","st":"06:15","et":"23:15"},{"name":"宜山路","st":"05:44","et":"22:44"}]}],"塘桥":[{"4号线":[{"name":"宜山路","st":"06:12","et":"23:12"},{"name":"宜山路","st":"05:47","et":"22:47"}]}],"蓝村路":[{"4号线":[{"name":"宜山路","st":"06:10","et":"23:10"},{"name":"宜山路","st":"05:49","et":"22:49"}]},{"6号线":[{"name":"港城路","st":"05:52","et":"22:52"},{"name":"东方体育中心","st":"06:13","et":"23:13"}]}],"浦电路4":[{"4号线":[{"name":"宜山路","st":"06:07","et":"23:07"},{"name":"宜山路","st":"05:51","et":"22:51"}]}],"浦电路6":[{"6号线":[{"name":"港城路","st":"06:11","et":"23:11"},{"name":"东方体育中心","st":"05:54","et":"22:54"}]}],"浦东大道":[{"4号线":[{"name":"宜山路","st":"06:03","et":"23:03"},{"name":"宜山路","st":"05:56","et":"22:56"}]}],"杨树浦路":[{"4号线":[{"name":"宜山路","st":"06:01","et":"23:01"},{"name":"宜山路","st":"05:58","et":"22:58"}]}],"临平路":[{"4号线":[{"name":"宜山路","st":"05:57","et":"22:57"},{"name":"宜山路","st":"06:02","et":"23:02"}]}],"海伦路":[{"10号线":[{"name":"新江湾城","st":"06:08","et":"22:39"},{"name":"航中路","st":"05:47","et":"22:17"}]},{"10号线主线":[{"name":"新江湾城","st":"06:35","et":"22:45"},{"name":"虹桥火车站","st":"05:42","et":"22:22"}]},{"4号线":[{"name":"宜山路","st":"05:55","et":"22:55"},{"name":"宜山路","st":"06:04","et":"23:04"}]}],"春申路":[{"5号线":[{"name":"闵行开发区","st":"06:02","et":"22:32"},{"name":"莘庄","st":"06:23","et":"22:23"}]}],"银都路":[{"5号线":[{"name":"闵行开发区","st":"06:04","et":"22:34"},{"name":"莘庄","st":"06:21","et":"22:21"}]}],"颛桥":[{"5号线":[{"name":"闵行开发区","st":"06:08","et":"22:38"},{"name":"莘庄","st":"06:18","et":"22:18"}]}],"北桥":[{"5号线":[{"name":"闵行开发区","st":"06:11","et":"22:41"},{"name":"莘庄","st":"06:14","et":"22:14"}]}],"剑川路":[{"5号线":[{"name":"闵行开发区","st":"06:14","et":"22:44"},{"name":"莘庄","st":"06:11","et":"22:11"}]}],"东川路":[{"5号线":[{"name":"闵行开发区","st":"06:16","et":"22:46"},{"name":"莘庄","st":"06:09","et":"22:09"}]}],"金平路":[{"5号线":[{"name":"闵行开发区","st":"06:19","et":"22:49"},{"name":"莘庄","st":"06:07","et":"22:07"}]}],"华宁路":[{"5号线":[{"name":"闵行开发区","st":"06:21","et":"22:51"},{"name":"莘庄","st":"06:04","et":"22:04"}]}],"文井路":[{"5号线":[{"name":"闵行开发区","st":"06:24","et":"22:54"},{"name":"莘庄","st":"06:02","et":"22:02"}]}],"闵行开发区":[{"5号线":[{"name":"闵行开发区","st":"06:26","et":"22:56"},{"name":"莘庄","st":"06:00","et":"22:00"}]}],"港城路":[{"6号线":[{"name":"港城路","st":"06:35","et":"23:35"},{"name":"东方体育中心","st":"05:30","et":"22:30"}]}],"外高桥保税区北":[{"6号线":[{"name":"港城路","st":"06:32","et":"23:32"},{"name":"东方体育中心","st":"05:32","et":"22:32"}]}],"航津路":[{"6号线":[{"name":"港城路","st":"06:30","et":"23:30"},{"name":"东方体育中心","st":"05:35","et":"22:35"}]}],"外高桥保税区南":[{"6号线":[{"name":"港城路","st":"06:27","et":"23:27"},{"name":"东方体育中心","st":"05:38","et":"22:38"}]}],"洲海路":[{"6号线":[{"name":"港城路","st":"06:24","et":"23:24"},{"name":"东方体育中心","st":"05:41","et":"22:41"}]}],"五洲大道":[{"6号线":[{"name":"港城路","st":"06:22","et":"23:22"},{"name":"东方体育中心","st":"05:43","et":"22:43"}]}],"东靖路":[{"6号线":[{"name":"港城路","st":"06:20","et":"23:20"},{"name":"东方体育中心","st":"05:45","et":"22:45"}]}],"五莲路":[{"6号线":[{"name":"港城路","st":"06:15","et":"23:15"},{"name":"东方体育中心","st":"05:49","et":"22:49"}]}],"博兴路":[{"6号线":[{"name":"港城路","st":"06:13","et":"23:13"},{"name":"东方体育中心","st":"05:52","et":"22:52"}]}],"金桥路":[{"6号线":[{"name":"港城路","st":"06:11","et":"23:11"},{"name":"东方体育中心","st":"05:54","et":"22:54"}]}],"云山路":[{"6号线":[{"name":"港城路","st":"06:08","et":"23:08"},{"name":"东方体育中心","st":"05:56","et":"22:56"}]}],"德平路":[{"6号线":[{"name":"港城路","st":"06:06","et":"23:06"},{"name":"东方体育中心","st":"05:59","et":"22:59"}]}],"北洋泾路":[{"6号线":[{"name":"港城路","st":"06:03","et":"23:03"},{"name":"东方体育中心","st":"06:01","et":"23:01"}]}],"民生路":[{"6号线":[{"name":"港城路","st":"06:01","et":"23:01"},{"name":"东方体育中心","st":"06:03","et":"23:03"}]}],"源深体育中心":[{"6号线":[{"name":"港城路","st":"05:59","et":"22:59"},{"name":"东方体育中心","st":"06:06","et":"23:06"}]}],"上海儿童医学中心":[{"6号线":[{"name":"港城路","st":"05:49","et":"22:49"},{"name":"东方体育中心","st":"06:16","et":"23:16"}]}],"临沂新村":[{"6号线":[{"name":"港城路","st":"05:46","et":"22:46"},{"name":"东方体育中心","st":"06:18","et":"23:18"}]}],"高科西路":[{"6号线":[{"name":"港城路","st":"05:44","et":"22:44"},{"name":"东方体育中心","st":"06:21","et":"23:21"}]},{"7号线":[{"name":"美兰湖","st":"05:43","et":"22:43"},{"name":"花木路","st":"06:20","et":"23:20"}]}],"东明路":[{"6号线":[{"name":"港城路","st":"05:41","et":"22:41"},{"name":"东方体育中心","st":"06:23","et":"23:23"}]}],"高青路":[{"6号线":[{"name":"港城路","st":"05:39","et":"22:39"},{"name":"东方体育中心","st":"06:26","et":"23:26"}]}],"华夏西路":[{"6号线":[{"name":"港城路","st":"05:36","et":"22:36"},{"name":"东方体育中心","st":"06:28","et":"23:28"}]}],"上南路":[{"6号线":[{"name":"港城路","st":"05:34","et":"22:34"},{"name":"东方体育中心","st":"06:30","et":"23:30"}]}],"灵岩南路":[{"6号线":[{"name":"港城路","st":"05:32","et":"22:32"},{"name":"东方体育中心","st":"06:32","et":"23:32"}]}],"东方体育中心":[{"6号线":[{"name":"港城路","st":"05:30","et":"22:30"},{"name":"东方体育中心","st":"06:34","et":"23:34"}]},{"8号线":[{"name":"市光路","st":"05:47","et":"22:47"},{"name":"沈杜公路","st":"06:19","et":"23:19"}]},{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:40","et":"23:11"},{"name":"迪士尼","st":"06:40","et":"23:11"},{"name":"嘉定北","st":"05:48","et":"22:57"},{"name":"花桥","st":"05:53","et":"22:27"}]}],"美兰湖":[{"7号线":[{"name":"美兰湖","st":"06:48","et":"23:48"},{"name":"花木路","st":"05:30","et":"22:15"}]}],"罗南新村":[{"7号线":[{"name":"美兰湖","st":"06:46","et":"23:46"},{"name":"花木路","st":"05:32","et":"22:17"}]}],"潘广路":[{"7号线":[{"name":"美兰湖","st":"06:42","et":"23:42"},{"name":"花木路","st":"05:36","et":"22:21"}]}],"刘行":[{"7号线":[{"name":"美兰湖","st":"06:40","et":"23:40"},{"name":"花木路","st":"05:39","et":"22:23"}]}],"顾村公园":[{"7号线":[{"name":"美兰湖","st":"06:37","et":"23:37"},{"name":"花木路","st":"05:42","et":"22:26"}]}],"祁华路":[{"7号线":[{"name":"美兰湖","st":"06:34","et":"23:34"},{"name":"花木路","st":"05:30","et":"22:30"}]}],"上海大学":[{"7号线":[{"name":"美兰湖","st":"06:31","et":"23:31"},{"name":"花木路","st":"05:32","et":"22:32"}]}],"南陈路":[{"7号线":[{"name":"美兰湖","st":"06:28","et":"23:28"},{"name":"花木路","st":"05:34","et":"22:34"}]}],"上大路":[{"7号线":[{"name":"美兰湖","st":"06:26","et":"23:26"},{"name":"花木路","st":"05:36","et":"22:36"}]}],"场中路":[{"7号线":[{"name":"美兰湖","st":"06:24","et":"23:24"},{"name":"花木路","st":"05:39","et":"22:39"}]}],"大场镇":[{"7号线":[{"name":"美兰湖","st":"06:21","et":"23:21"},{"name":"花木路","st":"05:41","et":"22:41"}]}],"行知路":[{"7号线":[{"name":"美兰湖","st":"06:19","et":"23:19"},{"name":"花木路","st":"05:43","et":"22:43"}]}],"大华三路":[{"7号线":[{"name":"美兰湖","st":"06:17","et":"23:17"},{"name":"花木路","st":"05:45","et":"22:45"}]}],"新村路":[{"7号线":[{"name":"美兰湖","st":"06:15","et":"23:15"},{"name":"花木路","st":"05:47","et":"22:47"}]}],"岚皋路":[{"7号线":[{"name":"美兰湖","st":"06:13","et":"23:13"},{"name":"花木路","st":"05:49","et":"22:49"}]}],"长寿路":[{"7号线":[{"name":"美兰湖","st":"06:08","et":"23:08"},{"name":"花木路","st":"05:55","et":"22:55"}]},{"13号线":[{"name":"世博大道","st":"06:15","et":"22:36"},{"name":"金运路","st":"06:12","et":"22:30"}]}],"昌平路":[{"7号线":[{"name":"美兰湖","st":"06:06","et":"23:06"},{"name":"花木路","st":"05:57","et":"22:57"}]}],"肇嘉浜路":[{"7号线":[{"name":"美兰湖","st":"05:58","et":"22:58"},{"name":"花木路","st":"06:04","et":"23:04"}]},{"9号线":[{"name":"杨高中路","st":"06:03","et":"22:49"},{"name":"松江南站","st":"05:51","et":"22:51"}]}],"龙华中路":[{"7号线":[{"name":"美兰湖","st":"05:54","et":"22:54"},{"name":"花木路","st":"06:08","et":"23:08"}]},{"12号线":[{"name":"七莘路","st":"06:23","et":"23:23"},{"name":"金海路","st":"05:54","et":"22:54"}]}],"后滩":[{"7号线":[{"name":"美兰湖","st":"05:51","et":"22:51"},{"name":"花木路","st":"06:12","et":"23:12"}]}],"长清路":[{"7号线":[{"name":"美兰湖","st":"05:49","et":"22:49"},{"name":"花木路","st":"06:14","et":"23:14"}]}],"耀华路":[{"7号线":[{"name":"美兰湖","st":"05:47","et":"22:47"},{"name":"花木路","st":"06:16","et":"23:16"}]},{"8号线":[{"name":"市光路","st":"05:53","et":"22:53"},{"name":"沈杜公路","st":"06:12","et":"23:12"}]}],"云台路":[{"7号线":[{"name":"美兰湖","st":"05:45","et":"22:45"},{"name":"花木路","st":"06:18","et":"23:18"}]}],"杨高南路":[{"7号线":[{"name":"美兰湖","st":"05:40","et":"22:40"},{"name":"花木路","st":"06:23","et":"23:23"}]}],"锦绣路":[{"7号线":[{"name":"美兰湖","st":"05:38","et":"22:38"},{"name":"花木路","st":"06:25","et":"23:25"}]}],"芳华路":[{"7号线":[{"name":"美兰湖","st":"05:35","et":"22:35"},{"name":"花木路","st":"06:27","et":"23:27"}]}],"花木路":[{"7号线":[{"name":"美兰湖","st":"05:30","et":"22:30"},{"name":"花木路","st":"06:33","et":"23:33"}]}],"市光路":[{"8号线":[{"name":"市光路","st":"06:36","et":"23:36"},{"name":"沈杜公路","st":"05:30","et":"22:30"}]}],"嫩江路":[{"8号线":[{"name":"市光路","st":"06:34","et":"23:34"},{"name":"沈杜公路","st":"05:31","et":"22:31"}]}],"翔殷路":[{"8号线":[{"name":"市光路","st":"06:32","et":"23:32"},{"name":"沈杜公路","st":"05:33","et":"22:33"}]}],"黄兴公园":[{"8号线":[{"name":"市光路","st":"06:30","et":"23:30"},{"name":"沈杜公路","st":"05:35","et":"22:35"}]}],"延吉中路":[{"8号线":[{"name":"市光路","st":"06:28","et":"23:28"},{"name":"沈杜公路","st":"05:37","et":"22:37"}]}],"黄兴路":[{"8号线":[{"name":"市光路","st":"06:26","et":"23:26"},{"name":"沈杜公路","st":"05:40","et":"22:40"}]}],"江浦路":[{"8号线":[{"name":"市光路","st":"06:24","et":"23:24"},{"name":"沈杜公路","st":"05:42","et":"22:42"}]}],"鞍山新村":[{"8号线":[{"name":"市光路","st":"06:22","et":"23:22"},{"name":"沈杜公路","st":"05:44","et":"22:44"}]}],"四平路":[{"10号线":[{"name":"新江湾城","st":"06:12","et":"22:43"},{"name":"航中路","st":"05:43","et":"22:13"}]},{"10号线主线":[{"name":"新江湾城","st":"06:39","et":"22:49"},{"name":"虹桥火车站","st":"05:38","et":"22:19"}]},{"8号线":[{"name":"市光路","st":"06:20","et":"23:20"},{"name":"沈杜公路","st":"05:46","et":"22:46"}]}],"曲阳路":[{"8号线":[{"name":"市光路","st":"06:18","et":"23:18"},{"name":"沈杜公路","st":"05:48","et":"22:48"}]}],"西藏北路":[{"8号线":[{"name":"市光路","st":"06:13","et":"23:13"},{"name":"沈杜公路","st":"05:53","et":"22:53"}]}],"中兴路":[{"8号线":[{"name":"市光路","st":"06:10","et":"23:10"},{"name":"沈杜公路","st":"05:55","et":"22:55"}]}],"大世界":[{"8号线":[{"name":"市光路","st":"06:04","et":"23:04"},{"name":"沈杜公路","st":"06:01","et":"23:01"}]}],"老西门":[{"10号线":[{"name":"新江湾城","st":"05:57","et":"22:28"},{"name":"航中路","st":"05:58","et":"22:28"}]},{"10号线主线":[{"name":"新江湾城","st":"06:24","et":"22:34"},{"name":"虹桥火车站","st":"05:53","et":"22:33"}]},{"8号线":[{"name":"市光路","st":"06:02","et":"23:02"},{"name":"沈杜公路","st":"06:03","et":"23:03"}]}],"陆家浜路":[{"8号线":[{"name":"市光路","st":"06:00","et":"23:00"},{"name":"沈杜公路","st":"06:05","et":"23:05"}]},{"9号线":[{"name":"杨高中路","st":"06:12","et":"22:58"},{"name":"松江南站","st":"05:43","et":"22:43"}]}],"中华艺术宫":[{"8号线":[{"name":"市光路","st":"05:55","et":"22:55"},{"name":"沈杜公路","st":"06:10","et":"23:10"}]}],"成山路":[{"8号线":[{"name":"市光路","st":"05:51","et":"22:51"},{"name":"沈杜公路","st":"06:14","et":"23:14"}]}],"杨思":[{"8号线":[{"name":"市光路","st":"05:49","et":"22:49"},{"name":"沈杜公路","st":"06:16","et":"23:16"}]}],"凌兆新村":[{"8号线":[{"name":"市光路","st":"05:43","et":"22:43"},{"name":"沈杜公路","st":"06:22","et":"23:22"}]}],"芦恒路":[{"8号线":[{"name":"市光路","st":"05:40","et":"22:40"},{"name":"沈杜公路","st":"06:25","et":"23:25"}]}],"浦江镇":[{"8号线":[{"name":"市光路","st":"05:36","et":"22:36"},{"name":"沈杜公路","st":"06:29","et":"23:29"}]}],"江月路":[{"8号线":[{"name":"市光路","st":"05:34","et":"22:34"},{"name":"沈杜公路","st":"06:31","et":"23:31"}]}],"联航路":[{"8号线":[{"name":"市光路","st":"05:32","et":"22:32"},{"name":"沈杜公路","st":"06:33","et":"23:33"}]}],"沈杜公路":[{"8号线":[{"name":"市光路","st":"05:30","et":"22:30"},{"name":"沈杜公路","st":"06:35","et":"23:35"}]}],"杨高中路":[{"9号线":[{"name":"杨高中路","st":"06:24","et":"23:10"},{"name":"松江南站","st":"05:30","et":"22:30"}]}],"商城路":[{"9号线":[{"name":"杨高中路","st":"06:18","et":"23:05"},{"name":"松江南站","st":"05:36","et":"22:36"}]}],"小南门":[{"9号线":[{"name":"杨高中路","st":"06:15","et":"23:01"},{"name":"松江南站","st":"05:40","et":"22:40"}]}],"马当路":[{"9号线":[{"name":"杨高中路","st":"06:10","et":"22:56"},{"name":"松江南站","st":"05:45","et":"22:45"}]},{"13号线":[{"name":"世博大道","st":"06:31","et":"22:52"},{"name":"金运路","st":"06:05","et":"22:14"}]}],"打浦桥":[{"9号线":[{"name":"杨高中路","st":"06:07","et":"22:54"},{"name":"松江南站","st":"05:47","et":"22:47"}]}],"嘉善路":[{"9号线":[{"name":"杨高中路","st":"06:05","et":"22:52"},{"name":"松江南站","st":"05:49","et":"22:49"}]},{"12号线":[{"name":"七莘路","st":"06:18","et":"23:18"},{"name":"金海路","st":"05:59","et":"22:59"}]}],"桂林路":[{"9号线":[{"name":"杨高中路","st":"05:54","et":"22:40"},{"name":"松江南站","st":"06:00","et":"23:00"}]}],"漕河泾开发区":[{"9号线":[{"name":"杨高中路","st":"05:51","et":"22:37"},{"name":"松江南站","st":"06:03","et":"23:03"}]}],"合川路":[{"9号线":[{"name":"杨高中路","st":"05:48","et":"22:34"},{"name":"松江南站","st":"06:05","et":"23:05"}]}],"星中路":[{"9号线":[{"name":"杨高中路","st":"05:45","et":"22:31"},{"name":"松江南站","st":"06:08","et":"23:08"}]}],"七宝":[{"9号线":[{"name":"杨高中路","st":"05:42","et":"22:28"},{"name":"松江南站","st":"06:11","et":"23:11"}]}],"中春路":[{"9号线":[{"name":"杨高中路","st":"05:40","et":"22:26"},{"name":"松江南站","st":"06:14","et":"23:14"}]}],"九亭":[{"9号线":[{"name":"杨高中路","st":"06:12","et":"22:22"},{"name":"松江南站","st":"06:18","et":"23:18"}]}],"泗泾":[{"9号线":[{"name":"杨高中路","st":"06:05","et":"22:15"},{"name":"松江南站","st":"06:24","et":"23:24"}]}],"佘山":[{"9号线":[{"name":"杨高中路","st":"06:01","et":"22:11"},{"name":"松江南站","st":"06:29","et":"23:29"}]}],"洞泾":[{"9号线":[{"name":"杨高中路","st":"05:58","et":"22:08"},{"name":"松江南站","st":"06:32","et":"23:32"}]}],"松江大学城":[{"9号线":[{"name":"杨高中路","st":"05:53","et":"22:03"},{"name":"松江南站","st":"06:36","et":"23:36"}]}],"松江新城":[{"9号线":[{"name":"杨高中路","st":"05:50","et":"22:00"},{"name":"松江南站","st":"06:40","et":"23:40"}]}],"松江体育中心":[{"9号线":[{"name":"杨高中路","st":"05:47","et":"21:57"},{"name":"松江南站","st":"06:43","et":"23:43"}]}],"醉白池":[{"9号线":[{"name":"杨高中路","st":"05:44","et":"21:54"},{"name":"松江南站","st":"06:46","et":"23:46"}]}],"松江南站":[{"9号线":[{"name":"杨高中路","st":"05:40","et":"21:50"},{"name":"松江南站","st":"06:49","et":"23:49"}]}],"新江湾城":[{"10号线":[{"name":"新江湾城","st":"06:25","et":"22:57"},{"name":"航中路","st":"05:30","et":"22:00"}]},{"10号线主线":[{"name":"新江湾城","st":"06:52","et":"23:03"},{"name":"虹桥火车站","st":"05:25","et":"22:05"}]}],"殷高东路":[{"10号线":[{"name":"新江湾城","st":"06:23","et":"22:55"},{"name":"航中路","st":"05:31","et":"22:01"}]},{"10号线主线":[{"name":"新江湾城","st":"06:50","et":"23:01"},{"name":"虹桥火车站","st":"05:26","et":"22:07"}]}],"三门路":[{"10号线":[{"name":"新江湾城","st":"06:22","et":"22:53"},{"name":"航中路","st":"05:33","et":"22:03"}]},{"10号线主线":[{"name":"新江湾城","st":"06:48","et":"22:59"},{"name":"虹桥火车站","st":"05:28","et":"22:09"}]}],"江湾体育场":[{"10号线":[{"name":"新江湾城","st":"06:19","et":"22:51"},{"name":"航中路","st":"05:35","et":"22:06"}]},{"10号线主线":[{"name":"新江湾城","st":"06:46","et":"22:57"},{"name":"虹桥火车站","st":"05:30","et":"22:11"}]}],"五角场":[{"10号线":[{"name":"新江湾城","st":"06:18","et":"22:49"},{"name":"航中路","st":"05:37","et":"22:07"}]},{"10号线主线":[{"name":"新江湾城","st":"06:45","et":"22:55"},{"name":"虹桥火车站","st":"05:32","et":"22:13"}]}],"国权路":[{"10号线":[{"name":"新江湾城","st":"06:16","et":"22:47"},{"name":"航中路","st":"05:39","et":"22:09"}]},{"10号线主线":[{"name":"新江湾城","st":"06:43","et":"22:53"},{"name":"虹桥火车站","st":"05:34","et":"22:15"}]}],"同济大学":[{"10号线":[{"name":"新江湾城","st":"06:14","et":"22:45"},{"name":"航中路","st":"05:41","et":"22:11"}]},{"10号线主线":[{"name":"新江湾城","st":"06:41","et":"22:51"},{"name":"虹桥火车站","st":"05:36","et":"22:16"}]}],"邮电新村":[{"10号线":[{"name":"新江湾城","st":"06:10","et":"22:41"},{"name":"航中路","st":"05:45","et":"22:15"}]},{"10号线主线":[{"name":"新江湾城","st":"06:37","et":"22:47"},{"name":"虹桥火车站","st":"05:40","et":"22:20"}]}],"四川北路":[{"10号线":[{"name":"新江湾城","st":"06:06","et":"22:37"},{"name":"航中路","st":"05:49","et":"22:19"}]},{"10号线主线":[{"name":"新江湾城","st":"06:33","et":"22:43"},{"name":"虹桥火车站","st":"05:44","et":"22:25"}]}],"豫园":[{"10号线":[{"name":"新江湾城","st":"06:00","et":"22:31"},{"name":"航中路","st":"05:56","et":"22:26"}]},{"10号线主线":[{"name":"新江湾城","st":"06:27","et":"22:37"},{"name":"虹桥火车站","st":"05:51","et":"22:31"}]}],"新天地":[{"10号线":[{"name":"新江湾城","st":"05:55","et":"22:26"},{"name":"航中路","st":"06:00","et":"22:30"}]},{"10号线主线":[{"name":"新江湾城","st":"06:22","et":"22:32"},{"name":"虹桥火车站","st":"05:55","et":"22:35"}]},{"13号线":[{"name":"世博大道","st":"06:29","et":"22:50"},{"name":"金运路","st":"06:07","et":"22:15"}]}],"上海图书馆":[{"10号线":[{"name":"新江湾城","st":"05:50","et":"22:21"},{"name":"航中路","st":"06:05","et":"22:35"}]},{"10号线主线":[{"name":"新江湾城","st":"06:17","et":"22:27"},{"name":"虹桥火车站","st":"06:00","et":"22:41"}]}],"交通大学":[{"10号线":[{"name":"新江湾城","st":"05:48","et":"22:19"},{"name":"航中路","st":"06:07","et":"22:37"}]},{"10号线主线":[{"name":"新江湾城","st":"06:15","et":"22:25"},{"name":"虹桥火车站","st":"06:02","et":"22:43"}]},{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:24","et":"22:56"},{"name":"迪士尼","st":"06:24","et":"22:56"},{"name":"嘉定北","st":"06:04","et":"23:12"},{"name":"花桥","st":"06:09","et":"22:42"}]}],"宋园路":[{"10号线":[{"name":"新江湾城","st":"05:43","et":"22:15"},{"name":"航中路","st":"06:12","et":"22:41"}]},{"10号线主线":[{"name":"新江湾城","st":"06:10","et":"22:21"},{"name":"虹桥火车站","st":"06:07","et":"22:47"}]}],"伊犁路":[{"10号线":[{"name":"新江湾城","st":"05:42","et":"22:13"},{"name":"航中路","st":"06:13","et":"22:43"}]},{"10号线主线":[{"name":"新江湾城","st":"06:08","et":"22:19"},{"name":"虹桥火车站","st":"06:08","et":"22:49"}]}],"水城路":[{"10号线":[{"name":"新江湾城","st":"05:40","et":"22:11"},{"name":"航中路","st":"06:16","et":"22:45"}]},{"10号线主线":[{"name":"新江湾城","st":"06:06","et":"22:17"},{"name":"虹桥火车站","st":"06:11","et":"22:51"}]}],"龙溪路":[{"10号线":[{"name":"新江湾城","st":"05:37","et":"22:08"},{"name":"航中路","st":"06:18","et":"22:47"}]},{"10号线主线":[{"name":"新江湾城","st":"06:04","et":"22:14"},{"name":"虹桥火车站","st":"06:13","et":"22:53"}]}],"龙柏新村":[{"10号线":[{"name":"新江湾城","st":"05:34","et":"22:05"},{"name":"航中路","st":"06:21","et":"22:51"}]}],"紫藤路":[{"10号线":[{"name":"新江湾城","st":"05:32","et":"22:03"},{"name":"航中路","st":"06:23","et":"22:53"}]}],"航中路":[{"10号线":[{"name":"新江湾城","st":"05:30","et":"22:01"},{"name":"航中路","st":"06:26","et":"22:55"}]}],"上海动物园":[{"10号线主线":[{"name":"新江湾城","st":"06:02","et":"22:12"},{"name":"虹桥火车站","st":"06:15","et":"22:55"}]}],"虹桥1号航站楼":[{"10号线主线":[{"name":"新江湾城","st":"05:59","et":"22:09"},{"name":"虹桥火车站","st":"06:18","et":"22:58"}]}],"世博大道":[{"13号线":[{"name":"世博大道","st":"06:36","et":"22:57"},{"name":"金运路","st":"06:00","et":"22:08"}]}],"世博会博物馆":[{"13号线":[{"name":"世博大道","st":"06:33","et":"22:54"},{"name":"金运路","st":"06:03","et":"22:11"}]}],"淮海中路":[{"13号线":[{"name":"世博大道","st":"06:26","et":"22:47"},{"name":"金运路","st":"06:10","et":"22:18"}]}],"自然博物馆":[{"13号线":[{"name":"世博大道","st":"06:21","et":"22:42"},{"name":"金运路","st":"06:14","et":"22:23"}]}],"江宁路":[{"13号线":[{"name":"世博大道","st":"06:17","et":"22:38"},{"name":"金运路","st":"06:19","et":"22:28"}]}],"武宁路":[{"13号线":[{"name":"世博大道","st":"06:13","et":"22:34"},{"name":"金运路","st":"06:14","et":"22:32"}]}],"大渡河路":[{"13号线":[{"name":"世博大道","st":"06:04","et":"22:25"},{"name":"金运路","st":"06:23","et":"22:40"}]}],"真北路":[{"13号线":[{"name":"世博大道","st":"06:01","et":"22:22"},{"name":"金运路","st":"06:26","et":"22:43"}]}],"祁连山南路":[{"13号线":[{"name":"世博大道","st":"05:59","et":"22:20"},{"name":"金运路","st":"06:28","et":"22:46"}]}],"丰庄":[{"13号线":[{"name":"世博大道","st":"05:56","et":"22:17"},{"name":"金运路","st":"06:31","et":"22:48"}]}],"金沙江西路":[{"13号线":[{"name":"世博大道","st":"05:52","et":"22:13"},{"name":"金运路","st":"06:34","et":"22:51"}]}],"金运路":[{"13号线":[{"name":"世博大道","st":"05:50","et":"22:11"},{"name":"金运路","st":"06:36","et":"22:54"}]}],"迪士尼":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"07:08","et":"23:39"},{"name":"嘉定北","st":"06:00","et":"22:30"}]}],"康新公路":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"07:04","et":"23:34"},{"name":"嘉定北","st":"06:04","et":"22:34"}]}],"秀沿路":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"07:01","et":"23:31"},{"name":"嘉定北","st":"06:07","et":"22:37"}]}],"御桥":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"06:55","et":"23:25"},{"name":"嘉定北","st":"05:33","et":"22:43"}]}],"浦三路":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"06:49","et":"23:21"},{"name":"嘉定北","st":"05:38","et":"22:47"}]}],"三林东":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"06:47","et":"23:18"},{"name":"嘉定北","st":"05:41","et":"22:50"}]}],"三林":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:45","et":"23:16"},{"name":"迪士尼","st":"06:45","et":"23:16"},{"name":"嘉定北","st":"05:43","et":"22:52"},{"name":"花桥","st":"05:48","et":"22:22"}]}],"龙耀路":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:37","et":"23:08"},{"name":"迪士尼","st":"06:37","et":"23:08"},{"name":"嘉定北","st":"05:51","et":"23:00"},{"name":"花桥","st":"05:56","et":"22:30"}]}],"云锦路":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:35","et":"23:06"},{"name":"迪士尼","st":"06:35","et":"23:06"},{"name":"嘉定北","st":"05:53","et":"23:02"},{"name":"花桥","st":"05:58","et":"22:32"}]}],"龙华":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:33","et":"23:04"},{"name":"迪士尼","st":"06:33","et":"23:04"},{"name":"嘉定北","st":"05:55","et":"23:04"},{"name":"花桥","st":"06:00","et":"22:34"}]},{"12号线":[{"name":"七莘路","st":"06:26","et":"23:26"},{"name":"金海路","st":"05:51","et":"22:51"}]}],"上海游泳馆":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:30","et":"23:02"},{"name":"迪士尼","st":"06:30","et":"23:02"},{"name":"嘉定北","st":"05:58","et":"23:06"},{"name":"花桥","st":"06:03","et":"22:36"}]}],"隆德路":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:18","et":"22:50"},{"name":"迪士尼","st":"06:18","et":"22:50"},{"name":"嘉定北","st":"06:02","et":"23:18"},{"name":"花桥","st":"06:07","et":"22:48"}]},{"13号线":[{"name":"世博大道","st":"06:10","et":"22:31"},{"name":"金运路","st":"06:17","et":"22:34"}]}],"枫桥路":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:14","et":"22:46"},{"name":"迪士尼","st":"06:14","et":"22:46"},{"name":"嘉定北","st":"06:06","et":"23:22"},{"name":"花桥","st":"06:11","et":"22:52"}]}],"真如":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:12","et":"22:44"},{"name":"迪士尼","st":"06:12","et":"22:44"},{"name":"嘉定北","st":"06:08","et":"23:25"},{"name":"花桥","st":"06:13","et":"22:55"}]}],"上海西站":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:09","et":"22:41"},{"name":"迪士尼","st":"06:09","et":"22:41"},{"name":"嘉定北","st":"06:11","et":"23:27"},{"name":"花桥","st":"06:16","et":"22:57"}]}],"李子园":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:07","et":"22:39"},{"name":"迪士尼","st":"06:07","et":"22:39"},{"name":"嘉定北","st":"06:13","et":"23:30"},{"name":"花桥","st":"06:18","et":"23:00"}]}],"祁连山路":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:04","et":"22:36"},{"name":"迪士尼","st":"06:04","et":"22:36"},{"name":"嘉定北","st":"06:16","et":"23:32"},{"name":"花桥","st":"06:21","et":"23:02"}]}],"武威路":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:02","et":"22:34"},{"name":"迪士尼","st":"06:02","et":"22:34"},{"name":"嘉定北","st":"06:18","et":"23:34"},{"name":"花桥","st":"06:23","et":"23:04"}]}],"桃浦新村":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"06:00","et":"22:32"},{"name":"迪士尼","st":"06:00","et":"22:32"},{"name":"嘉定北","st":"06:20","et":"23:37"},{"name":"花桥","st":"06:25","et":"23:07"}]}],"南翔":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"05:56","et":"22:28"},{"name":"迪士尼","st":"05:56","et":"22:28"},{"name":"嘉定北","st":"06:25","et":"23:41"},{"name":"花桥","st":"06:30","et":"23:11"}]}],"马陆":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"05:50","et":"22:22"},{"name":"迪士尼","st":"05:50","et":"22:22"},{"name":"嘉定北","st":"06:30","et":"23:46"},{"name":"花桥","st":"06:35","et":"23:16"}]}],"嘉定新城":[{"11号线(迪士尼-嘉定北)":[{"name":"三林","st":"05:47","et":"22:19"},{"name":"迪士尼","st":"05:47","et":"22:19"},{"name":"嘉定北","st":"06:33","et":"23:50"},{"name":"花桥","st":"06:38","et":"23:20"}]}],"白银路":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"05:44","et":"22:16"},{"name":"嘉定北","st":"06:36","et":"23:52"}]}],"嘉定西":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"05:40","et":"22:12"},{"name":"嘉定北","st":"06:40","et":"23:56"}]}],"嘉定北":[{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"05:38","et":"22:10"},{"name":"嘉定北","st":"06:42","et":"23:59"}]}],"上海赛车场":[{"11号线(花桥-三林)":[{"name":"三林","st":"05:47","et":"22:10"},{"name":"花桥","st":"06:42","et":"23:24"}]}],"昌吉东路":[{"11号线(花桥-三林)":[{"name":"三林","st":"05:42","et":"22:05"},{"name":"花桥","st":"06:48","et":"23:29"}]}],"上海汽车城":[{"11号线(花桥-三林)":[{"name":"三林","st":"05:39","et":"22:02"},{"name":"花桥","st":"06:51","et":"23:32"}]}],"安亭":[{"11号线(花桥-三林)":[{"name":"三林","st":"05:37","et":"22:00"},{"name":"花桥","st":"06:54","et":"23:35"}]}],"兆丰路":[{"11号线(花桥-三林)":[{"name":"三林","st":"05:45","et":"21:57"},{"name":"花桥","st":"06:56","et":"23:38"}]}],"光明路":[{"11号线(花桥-三林)":[{"name":"三林","st":"05:42","et":"21:53"},{"name":"花桥","st":"06:59","et":"23:42"}]}],"花桥":[{"11号线(花桥-三林)":[{"name":"三林","st":"05:40","et":"21:51"},{"name":"花桥","st":"07:01","et":"23:44"}]}],"金海路":[{"12号线":[{"name":"七莘路","st":"05:30","et":"22:30"},{"name":"金海路","st":"06:34","et":"23:47"}]}],"申江路":[{"12号线":[{"name":"七莘路","st":"05:34","et":"22:34"},{"name":"金海路","st":"06:31","et":"23:43"}]}],"金京路":[{"12号线":[{"name":"七莘路","st":"05:36","et":"22:36"},{"name":"金海路","st":"06:28","et":"23:41"}]}],"杨高北路":[{"12号线":[{"name":"七莘路","st":"05:38","et":"22:38"},{"name":"金海路","st":"06:26","et":"23:39"}]}],"巨峰路":[{"6号线":[{"name":"港城路","st":"06:17","et":"23:17"},{"name":"东方体育中心","st":"05:47","et":"22:47"}]},{"12号线":[{"name":"七莘路","st":"05:41","et":"22:41"},{"name":"金海路","st":"06:24","et":"23:36"}]}],"东陆路":[{"12号线":[{"name":"七莘路","st":"05:43","et":"22:43"},{"name":"金海路","st":"06:21","et":"23:34"}]}],"复兴岛":[{"12号线":[{"name":"七莘路","st":"05:46","et":"22:46"},{"name":"金海路","st":"06:18","et":"23:31"}]}],"爱国路":[{"12号线":[{"name":"七莘路","st":"05:48","et":"22:48"},{"name":"金海路","st":"06:16","et":"23:29"}]}],"隆昌路":[{"12号线":[{"name":"七莘路","st":"05:50","et":"22:50"},{"name":"金海路","st":"06:14","et":"23:27"}]}],"宁国路":[{"12号线":[{"name":"七莘路","st":"05:53","et":"22:53"},{"name":"金海路","st":"06:11","et":"23:24"}]}],"江浦公园":[{"12号线":[{"name":"七莘路","st":"05:55","et":"22:55"},{"name":"金海路","st":"06:09","et":"23:22"}]}],"大连路":[{"4号线":[{"name":"宜山路","st":"05:59","et":"22:59"},{"name":"宜山路","st":"06:00","et":"23:00"}]},{"12号线":[{"name":"七莘路","st":"05:57","et":"22:57"},{"name":"金海路","st":"06:07","et":"23:20"}]}],"提篮桥":[{"12号线":[{"name":"七莘路","st":"05:59","et":"22:59"},{"name":"金海路","st":"06:05","et":"23:18"}]}],"国际客运中心":[{"12号线":[{"name":"七莘路","st":"06:01","et":"23:01"},{"name":"金海路","st":"06:03","et":"23:15"}]}],"天潼路":[{"10号线":[{"name":"新江湾城","st":"06:04","et":"22:35"},{"name":"航中路","st":"05:51","et":"22:21"}]},{"10号线主线":[{"name":"新江湾城","st":"06:31","et":"22:41"},{"name":"虹桥火车站","st":"05:46","et":"22:27"}]},{"12号线":[{"name":"七莘路","st":"06:05","et":"23:05"},{"name":"金海路","st":"06:00","et":"23:12"}]}],"曲阜路":[{"8号线":[{"name":"市光路","st":"06:08","et":"23:08"},{"name":"沈杜公路","st":"05:57","et":"22:57"}]},{"12号线":[{"name":"七莘路","st":"06:07","et":"23:07"},{"name":"金海路","st":"05:57","et":"23:10"}]}],"桂林公园":[{"12号线":[{"name":"七莘路","st":"06:33","et":"23:33"},{"name":"金海路","st":"05:44","et":"22:44"}]}],"虹漕路":[{"12号线":[{"name":"七莘路","st":"06:35","et":"23:35"},{"name":"金海路","st":"05:42","et":"22:42"}]}],"虹梅路":[{"12号线":[{"name":"七莘路","st":"06:38","et":"23:38"},{"name":"金海路","st":"05:40","et":"22:40"}]}],"东兰路":[{"12号线":[{"name":"七莘路","st":"06:40","et":"23:40"},{"name":"金海路","st":"05:37","et":"22:37"}]}],"顾戴路":[{"12号线":[{"name":"七莘路","st":"06:43","et":"23:43"},{"name":"金海路","st":"05:35","et":"22:35"}]}],"虹莘路":[{"12号线":[{"name":"七莘路","st":"06:45","et":"23:45"},{"name":"金海路","st":"05:32","et":"22:32"}]}],"七莘路":[{"12号线":[{"name":"七莘路","st":"06:47","et":"23:47"},{"name":"金海路","st":"05:30","et":"22:30"}]}],"罗山路":[{"16号线":[{"name":"龙阳路","st":"06:15","et":"23:02"},{"name":"滴水湖","st":"05:58","et":"22:09"}]},{"11号线(迪士尼-嘉定北)":[{"name":"迪士尼","st":"06:58","et":"23:28"},{"name":"嘉定北","st":"05:30","et":"22:40"}]}],"华夏中路":[{"16号线":[{"name":"龙阳路","st":"06:19","et":"23:06"},{"name":"滴水湖","st":"05:54","et":"22:05"}]}],"周浦东":[{"16号线":[{"name":"龙阳路","st":"06:10","et":"22:55"},{"name":"滴水湖","st":"06:02","et":"22:16"}]}],"鹤沙航城":[{"16号线":[{"name":"龙阳路","st":"06:06","et":"22:49"},{"name":"滴水湖","st":"06:06","et":"22:22"}]}],"航头东":[{"16号线":[{"name":"龙阳路","st":"06:03","et":"22:45"},{"name":"滴水湖","st":"06:09","et":"22:26"}]}],"新场":[{"16号线":[{"name":"龙阳路","st":"06:00","et":"22:39"},{"name":"滴水湖","st":"06:13","et":"22:32"}]}],"野生动物园":[{"16号线":[{"name":"龙阳路","st":"06:05","et":"22:32"},{"name":"滴水湖","st":"06:18","et":"22:39"}]}],"惠南":[{"16号线":[{"name":"龙阳路","st":"06:00","et":"22:24"},{"name":"滴水湖","st":"06:24","et":"22:47"}]}],"惠南东":[{"16号线":[{"name":"龙阳路","st":"06:17","et":"22:19"},{"name":"滴水湖","st":"06:29","et":"22:52"}]}],"书院":[{"16号线":[{"name":"龙阳路","st":"06:09","et":"22:09"},{"name":"滴水湖","st":"06:38","et":"23:03"}]}],"临港大道":[{"16号线":[{"name":"龙阳路","st":"06:03","et":"22:03"},{"name":"滴水湖","st":"06:44","et":"23:09"}]}],"滴水湖":[{"16号线":[{"name":"龙阳路","st":"06:00","et":"22:00"},{"name":"滴水湖","st":"06:47","et":"23:12"}]}]}';
let colorMap = {
	1: '#EE1822',
	2: '#85C73F',
	3: '#FDD303',
	4: '#4E2C8D',
	5: '#8F57A2',
	6: '#D7156B',
	7: '#F26F1F',
	8: '#009DD7',
	9: '#67CCF6',
	10: '#B8A8CF',
	11: '#7C1F31',
	12: '#54ae11',
	13: '#E77DAD',
	16: '#78d6cd',
}
let allTimesheet = JSON.parse(timesheetStr);
let container = document.querySelector('.container');
let svg = document.querySelector('.svg');
let container3 = document.querySelector('.container3');
let msContainer = document.querySelector('.ms-container');
let recoverBtn = document.querySelector('.recover');
let error = document.querySelector('.error');
let lineBackgroundReg = /line\d+\-background/;
let wc = document.querySelector('.wc');
let jsonData = 'wc.json';
let isShowWcInfo = false; // not show wc infomation initially
let wcNotDisplayImgSrc = './image/wc0.png';
let wcDisplayImgSrc = './image/wc.png';
let wcDisplayDiv = document.querySelector('.wc-display');
let isLoad = false; // the load status
let emailAddress = 'mailto:bing.ecnu@gmail.com';

recoverBtn.addEventListener('click', (e) => {
	localStorage.clear();
})

// query for the wc information
wc.addEventListener('click', (e) => {
	let stationName = container3.querySelector('.title_name').innerText;	
	isShowWcInfo = !isShowWcInfo;
	let currentImgSrc = wc.src;
	changeInfoContainer(false);
	if (isShowWcInfo) {
		if (currentImgSrc !== wcDisplayImgSrc) {
			wc.src = wcDisplayImgSrc;
			queryWcInfo(stationName);
		}
	} else {
		if (currentImgSrc !== wcNotDisplayImgSrc) {
			wc.src = wcNotDisplayImgSrc;
			initialWC();
		}
	}
	
})

error.addEventListener('click', (e) => {
	let stationName = container3.querySelector('.title_name').innerText;
	emailAddress = emailAddress + '?subject=' + stationName + '-problem submit';
	window.open(emailAddress);
})

function queryWcInfo(stationName) {
	if (!localStorage[stationName]) {
		requestJson(stationName);
	} else {
		changeInfoContainer(true, localStorage[stationName]);
	}
}

function initialWC() {
	wcDisplayDiv.innerText = '';
	msContainer.style.display = 'block';
	wcDisplayDiv.style = '';
	isShowWcInfo = false;
	if (wc.src !== wcNotDisplayImgSrc) {
		wc.src = wcNotDisplayImgSrc;
	}
}

function requestJson(stationName) {
	fetch(jsonData).then(function(res) {
		if (res.ok) {
			res.json().then(function(data) {
				changeInfoContainer(true, data[stationName]);
				localStorage[stationName] = data[stationName];
			})
		} else {
			consoele.log('error:' + res.status);
		}
	}, function(e) {
		console.log('fetch failed:' + e);
	})
}

function changeInfoContainer(loadFinished, wcInfo) {
	wcDisplayDiv.style.margin = '.5rem';
	if (loadFinished) {
		wcDisplayDiv.innerText = wcInfo;
	} else {
		wcDisplayDiv.innerText = '正在加载...';
		msContainer.style.display = 'none';
	}
}

// click the map
svg.addEventListener('click', (e) => {
	let activatedItem = document.querySelector('.activated');
	let stationName = e.target.id || e.target.dataset.id;
	if (isChinese(stationName)) {
		let stationArr = allTimesheet[stationName];
		let stationArrLen = stationArr.length;

		// if there are several lines, only keep one
		if (container3.querySelectorAll('.line_div').length > 1) {
			initialContainer3(container3);
		}

		for (let i = 0; i < stationArrLen; i++) {
			let lineNum = Object.keys(stationArr[i])[0] === '机场磁悬浮' ? '2' : Object.keys(stationArr[i])[0].match(/\d+/)[0];
			let lineDiv;
			let detailDiv;
			if (i >= 1) {
				lineDiv = container3.querySelector('.line_div').cloneNode(true);
				detailDiv = container3.querySelector('.detail').cloneNode(true);
				lineDiv.classList = lineDiv.classList.value.replace(lineBackgroundReg, 'initial-line');
				convertLineDiv(false, lineDiv, lineNum);
				container3.querySelector('.line_container').appendChild(lineDiv);
				detailDiv.style.display = 'none';
				msContainer.appendChild(detailDiv);
			} else {
				lineDiv = container3.querySelector('.line_div');
				lineDiv.style.display = 'block';
				detailDiv = container3.querySelector('.detail');
				detailDiv.style.display = 'block';
				convertLineDiv(true, lineDiv, lineNum);
			}
		}

		let lineDivs = document.querySelectorAll('.line_div');
		let details = document.querySelectorAll('.detail');
		let lineContainer = document.querySelector('.line_container');
		let currentLineDiv = container3.querySelector('.line_div');
		for (let j = 0; j < stationArr.length; j++) {
			let station = stationArr[j];
			setStationText(station, stationName, lineDivs[j], details[j]);
		}
		setContainer3(e.target);
		lineContainer.addEventListener('click', (e1) => {
			let target = e1.target;
			currentLineDiv = target;
			let line = target.innerText;
			changeLine(line);
		})
		if (isShowWcInfo) {
			queryWcInfo(stationName);
		}
	} else {
		container3.style.display = 'none';
		initialWC();
	}
})

function initialContainer3(container3) {
	let lineDivs = container3.querySelectorAll('.line_div');
	let details = container3.querySelectorAll('.detail');
	let lineContainer = container3.querySelector('.line_container');
	let msgbox = container3.querySelector('.msgbox');
	for (let i = 0; i < lineDivs.length; i++) {
		if (i === 0) {
			lineDivs[i].classList = lineDivs[i].classList.value.replace(lineBackgroundReg, '');
		} else {			
			lineContainer.removeChild(lineDivs[i]);
			msContainer.removeChild(details[i]);
		}
	}
}

function setInitialLineDivClass(lineDiv) {
	lineDiv.classList.remove('activated-line');
	lineDiv.classList = lineDiv.classList.value.replace(lineBackgroundReg, 'initial-line');
}

function changeLine(line) {
	let detailDivId = 'detail-' + line;
	let lineDivId = 'line-' + line;
	// the querySelector has a problem
	let lineDiv = document.getElementById(lineDivId);
	let detailDiv = document.getElementById(detailDivId);
	setlineColor(lineDiv, getLineNum(line));
	detailDiv.style.display = 'block';
	container3.querySelectorAll('.detail').forEach((detailDiv) => {
		if (detailDiv.id !== detailDivId) {
			detailDiv.style.display = 'none';
		}
	});
	container3.querySelectorAll('.line_div').forEach((lineDiv) => {
		if (lineDiv.innerText !== line) {
			setInitialLineDivClass(lineDiv);
		}
	});
}


function convertLineDiv(isActivated, lineDiv, lineNum) {
	let lineDivClassList = getClassListVal(lineDiv);
	if (isActivated) {
		setlineColor(lineDiv, lineNum);
		lineDiv.classList.add('activated-line');
		if (lineDivClassList.indexOf('initial-line') !== -1) {
			lineDiv.classList.remove('initial-line');
		}
	} else {
		if (lineDivClassList.indexOf('-background') !== -1) {
			lineDiv.classList = lineDivClassList.replace(lineBackgroundReg, 'initial-line');
		}
	}
}

function setlineColor(lineDiv, lineNum) {
	lineDiv.className = updateClassname(lineNum, lineDiv.className);
	lineDiv.classList.add('activated-line');
	document.querySelector('.line_container').style.borderBottom = '1px solid ' + colorMap[lineNum];
}

function updateClassname(lineNum, className) {
	if (className.indexOf('background') === -1) {
		className = className + ' ' + getLineBackground(lineNum);
	} else {
		className = className.replace(lineBackgroundReg, getLineBackground(lineNum));
	}
	className = className.replace('initial-line', '');
	return className;
}

function getLineBackground(line) {
	if (line === '机场磁悬浮') {
		line = 2;
	}
	return 'line' + line + '-background';
}

function setStationText(station, stationName, lineDiv, detail) {
	let key = Object.keys(station)[0];
	let timesheetArr = station[key];
	container3.querySelector('.title_name').innerText = stationName;
	lineDiv.innerText = key;
	// as the css id better not start with digit
	lineDiv.id = 'line-' + key;
	detail.id = 'detail-' + key;
	let direction = detail.querySelectorAll('.detail-direction');
	let startTime = detail.querySelectorAll('.start-time');
	let endTime = detail.querySelectorAll('.end-time');
	direction[0].innerText = timesheetArr[0].name + '方向';
	direction[1].innerText = timesheetArr[1].name + '方向';
	startTime[0].innerText = timesheetArr[0].st;
	startTime[1].innerText = timesheetArr[1].st;
	endTime[0].innerText = timesheetArr[0].et;
	endTime[1].innerText = timesheetArr[1].et;
}

function setContainer3(target) {
	let x = target.cx || target.x;
	let y = target.cy || target.y;
	container3.style.left = (+x.baseVal.valueAsString || +x.baseVal.valueAsString) - 130 + 'px';
	container3.style.top = (+y.baseVal.valueAsString || +y.baseVal.valueAsString) - 20 + 'px';
	container3.style.display = 'block';
}

function isChinese(str) {
	return /[^\u0000-\u00FF]/.test(str);
}

function getClassListVal(div) {
	return div.classList.value;
}


let initScale = 1;
let lastScale = 0;
let scale = 1.0;

let gesture = new AlloyFinger(container, {
    pinch: function (evt) {
        scale = evt.scale;

        if (lastScale) {
            scale *= lastScale;
        }
        if (scale > 2 ) {
            scale = 2;
        }
        else if (scale < 0.4) {
            scale = 0.4;
        }
        scale = scale.toFixed(2);
        let x = Math.abs(evt.touches[0].clientX - evt.touches[1].clientX) / 2 + Math.min(evt.touches[0].clientX, evt.touches[1].clientX);
        let y = Math.abs(evt.touches[0].clientY - evt.touches[1].clientY) / 2 + Math.min(evt.touches[0].clientY, evt.touches[1].clientY);
        container1.style.transformOrigin = x + container.scrollLeft + 'px ' + (y +  container.scrollTop) +'px';
				container1.style.transform = 'scale3d(' + scale +', '+ scale +',1)';
				let left = parseInt(container3.style.left || 0);
				let top = parseInt(container3.style.top || 0);
				container3.style.transform = 'translate(' + getTransX(left, scale, container1) + 'px, ' + getTransY(top, scale, container1) + 'px)';
    },
});

function getLineNum(line) {
	return line === '机场磁悬浮' ? line : line.match(/\d+/)[0];
}

function getTransX(orix, scale, element) {
	let centrex = 0;
	if (element.style.transformOrigin) {
		centrex = parseFloat(element.style.transformOrigin.split(' ')[0]);
	}
	return (orix -centrex) * (scale - 1);
}

function getTransY(oriy, scale, element) {
	let centrey = 0;
	if (element.style.transformOrigin) {
		centrey = parseFloat(element.style.transformOrigin.split(' ')[1]);
	}
	return (oriy - centrey) * (scale - 1);
}
